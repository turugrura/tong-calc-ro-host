import{a as je,b as Ne,c as Ve,d as He,e as ze,f as Ge,g as We,h as Ke,i as Je,j as Xe,k as Qe,l as de,m as et,n as tt}from"./chunk-USTSFJMT.js";import{C as Te,D as De,E as Le,F as $e,I as Ae,J as Be,L as Re}from"./chunk-H2KFH2WW.js";import{d as Ye,e as Ze}from"./chunk-P476JSJO.js";import{E as Ue,F as Fe,G as qe,e as J,i as X,o as be,y as we,z as Oe}from"./chunk-HNAONX6N.js";import{a as Se,e as Me}from"./chunk-XZAN7IKI.js";import{A as W,Ba as D,Ca as fe,Cb as me,E,Ea as R,F as K,Fc as Ee,J as w,K as O,Mc as Pe,Na as ve,Nb as re,Nc as ke,O as y,Oa as Ce,Z as n,_ as A,ac as p,ba as c,c as ne,da as r,ea as i,eb as P,fa as o,fb as L,fc as se,g as le,ga as _,gc as Ie,h as ue,hc as Q,ka as B,kc as I,l as _e,ma as S,mb as ye,na as d,ob as xe,q as G,qa as ae,r as ge,ra as x,tc as pe,u as k,ua as he,w as T,wa as m,xa as h,ya as f,za as oe}from"./chunk-44XE7UFD.js";import{a as z,b as ie}from"./chunk-YAHOFSNQ.js";function st(l,s){if(l&1&&_(0,"img",15),l&2){let e=d().$implicit,a=d();x("src","assets/demo/images/items/",a.model[e[0]],".png",y)}}function pt(l,s){if(l&1&&(i(0,"span",16),m(1),o()),l&2){let e=d().$implicit,a=d();n(1),f("+",a.model[e[0]+"Refine"],"")}}function dt(l,s){if(l&1&&(i(0,"div",19),_(1,"img",15),i(2,"div",10),m(3),o()()),l&2){let e=d(3);n(1),x("src","assets/demo/images/items/",e.model.ammo,".png",y),n(2),f(" ",(e.itemMap[e.model.ammo]==null?null:e.itemMap[e.model.ammo].name)||""," ")}}function ct(l,s){if(l&1&&(i(0,"td",17),c(1,dt,4,2,"div",18),o()),l&2){let e=d(2);n(1),r("ngIf",e.model.ammo)}}function ut(l,s){if(l&1&&_(0,"img",15),l&2){let e=d().$implicit,a=d();x("src","assets/demo/images/items/",a.model[e[1]]||a.model[e[2]],".png",y)}}function _t(l,s){if(l&1&&(i(0,"span",16),m(1),o()),l&2){let e=d().$implicit,a=d();n(1),f("+",a.model[e[1]+"Refine"]||a.model[e[2]+"Refine"],"")}}function gt(l,s){if(l&1&&(i(0,"tr")(1,"td",7)(2,"div",8),c(3,st,1,1,"img",9),i(4,"div",10),c(5,pt,2,1,"span",11),m(6),o()()(),c(7,ct,2,1,"td",12),i(8,"td",13)(9,"div",14),c(10,ut,1,1,"img",9),i(11,"div",10),c(12,_t,2,1,"span",11),m(13),o()()()()),l&2){let e=s.$implicit,a=s.index,t=d();n(3),r("ngIf",t.model[e[0]]),n(2),r("ngIf",t.model[e[0]+"Refine"]>0),n(1),f(" ",(t.itemMap[t.model[e[0]]]==null?null:t.itemMap[t.model[e[0]]].name)||""," "),n(1),r("ngIf",a===0),n(3),r("ngIf",!!t.model[e[1]]||!!t.model[e[2]]),n(2),r("ngIf",t.model[e[1]+"Refine"]>0||t.model[e[2]+"Refine"]>0),n(1),f(" ",(t.itemMap[t.model[e[1]]||t.model[e[2]]]==null?null:t.itemMap[t.model[e[1]]||t.model[e[2]]].name)||""," ")}}function ht(l,s){if(l&1&&_(0,"img",15),l&2){let e=d().$implicit,a=d();x("src","assets/demo/images/items/",a.model[e[0]],".png",y)}}function ft(l,s){if(l&1&&(i(0,"span",16),m(1),o()),l&2){let e=d().$implicit,a=d();n(1),f("+",a.model[e[0]+"Refine"],"")}}function vt(l,s){if(l&1&&(i(0,"div",19),_(1,"img",15),i(2,"div",10),m(3),o()()),l&2){let e=d(3);n(1),x("src","assets/demo/images/items/",e.model.costumeEnchantGarment4,".png",y),n(2),f(" ",(e.itemMap[e.model.costumeEnchantGarment4]==null?null:e.itemMap[e.model.costumeEnchantGarment4].name)||""," ")}}function Ct(l,s){if(l&1&&(i(0,"td",17),c(1,vt,4,2,"div",18),o()),l&2){let e=d(2);n(1),r("ngIf",e.model.costumeEnchantGarment4)}}function yt(l,s){if(l&1&&_(0,"img",15),l&2){let e=d().$implicit,a=d();x("src","assets/demo/images/items/",a.model[e[1]],".png",y)}}function xt(l,s){if(l&1&&(i(0,"span",16),m(1),o()),l&2){let e=d().$implicit,a=d();n(1),f("+",a.model[e[1]+"Refine"],"")}}function bt(l,s){if(l&1&&(i(0,"tr")(1,"td",20)(2,"div",8),c(3,ht,1,1,"img",9),i(4,"div",10),c(5,ft,2,1,"span",11),m(6),o()()(),c(7,Ct,2,1,"td",12),i(8,"td",21)(9,"div",14),c(10,yt,1,1,"img",9),i(11,"div",10),c(12,xt,2,1,"span",11),m(13),o()()()()),l&2){let e=s.$implicit,a=s.index,t=d();n(3),r("ngIf",t.model[e[0]]),n(2),r("ngIf",t.model[e[0]+"Refine"]>0),n(1),f(" ",(t.itemMap[t.model[e[0]]]==null?null:t.itemMap[t.model[e[0]]].name)||""," "),n(1),r("ngIf",a===0),n(3),r("ngIf",t.model[e[1]]),n(2),r("ngIf",t.model[e[1]+"Refine"]>0),n(1),f(" ",(t.itemMap[t.model[e[1]]]==null?null:t.itemMap[t.model[e[1]]].name)||""," ")}}var it=(()=>{class l{constructor(){this.itemMap={},this.model={},this.mainItemNames=[[p.headUpper,p.headMiddle],[p.headLower,p.armor],[p.weapon,p.shield,p.leftWeapon],[p.garment,p.boot],[p.accRight,p.accLeft]],this.shadowItemNames=[[p.costumeEnchantUpper,p.costumeEnchantMiddle],[p.costumeEnchantLower,p.shadowArmor],[p.shadowWeapon,p.shadowShield],[p.costumeEnchantGarment,p.shadowBoot],[p.shadowEarring,p.shadowPendant]]}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275cmp=E({type:l,selectors:[["app-equipment-ui"]],inputs:{itemMap:"itemMap",model:"model"},decls:13,vars:2,consts:[[1,"grid","grid-nogutter"],[1,"col-fixed","mb-2"],[1,"equipmentPreview",2,"width","450px"],[1,"panel"],[1,"equipmentTable","text-blue-500"],[4,"ngFor","ngForOf"],[1,"col-fixed"],[1,"main_left_item"],[1,"flex","gap-1"],["alt","","class","item_img",3,"src",4,"ngIf"],[1,"text_ellips","font-medium"],["class","font-bold",4,"ngIf"],["rowspan","6",4,"ngIf"],[1,"main_right_item"],[1,"flex","flex-row-reverse","gap-1"],["alt","",1,"item_img",3,"src"],[1,"font-bold"],["rowspan","6"],["class","ammo_container",4,"ngIf"],[1,"ammo_container"],[1,"shadow_left_item"],[1,"shadow_right_item"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"tbody"),c(6,gt,14,7,"tr",5),o()()()()(),i(7,"div",6)(8,"div",2)(9,"div",3)(10,"table",4)(11,"tbody"),c(12,bt,14,7,"tr",5),o()()()()()()),a&2&&(n(6),r("ngForOf",t.mainItemNames),n(6),r("ngForOf",t.shadowItemNames))},dependencies:[P,L],styles:[".main_left_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-left:7px}.main_left_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:10rem;height:37px;overflow:hidden;text-align:left}.main_right_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-right:5px}.main_right_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:9rem;height:37px;overflow:hidden;text-align:left}.shadow_left_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-left:7px}.shadow_left_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:10rem;height:37px;overflow:hidden;text-align:left}.shadow_right_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-right:5px}.shadow_right_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:9rem;height:37px;overflow:hidden;text-align:left}.item_img[_ngcontent-%COMP%]{height:fit-content;width:37px}.equipmentTable[_ngcontent-%COMP%]{width:450px;height:209px;background-image:url(https://www.divine-pride.net/Content/basic_interface/equipwin_bg.png);background-repeat:no-repeat;background-size:contain}"]})}}return l})();function Mt(l,s){if(l&1&&(i(0,"div",7),_(1,"img",8),o()),l&2){let e=d().$implicit;n(1),x("src","assets/demo/images/items/",e.mainId,".png",y)}}function It(l,s){if(l&1&&_(0,"img",8),l&2){let e=d().$implicit;x("src","assets/demo/images/items/",e,".png",y)}}function Et(l,s){l&1&&_(0,"img",17)}function Pt(l,s){if(l&1&&(i(0,"div",12)(1,"div",13),c(2,It,1,1,"img",14),c(3,Et,1,0,"img",15),i(4,"div",16),m(5),o()()()),l&2){let e=s.$implicit,a=d(2).$implicit,t=d();n(2),r("ngIf",a.isHead),n(1),r("ngIf",!a.isHead),n(2),f(" ",t.getItemLabel(e)," ")}}function kt(l,s){if(l&1&&(i(0,"div",12)(1,"div",13),_(2,"img",8),i(3,"div",16),m(4),o()()()),l&2){let e=s.$implicit,a=d(3);n(2),x("src","assets/demo/images/items/",e,".png",y),n(2),f(" ",a.getItemLabel(e)," ")}}function wt(l,s){if(l&1&&(i(0,"div")(1,"div",18),m(2),o()()),l&2){let e=s.$implicit;n(2),h(e)}}function Ot(l,s){if(l&1&&(i(0,"div",9),c(1,Pt,6,3,"div",10),c(2,kt,5,2,"div",10),i(3,"div",4),c(4,wt,3,1,"div",11),o()()),l&2){let e=d().$implicit;n(1),r("ngForOf",e.cardIds),n(1),r("ngForOf",e.enchantIds),n(2),r("ngForOf",e.optionTxts)}}function Tt(l,s){if(l&1&&(i(0,"div")(1,"div",4),c(2,Mt,2,1,"div",5),c(3,Ot,5,3,"div",6),o()()),l&2){let e=s.$implicit;D("grid grid-nogutter item_label_",e.itemType,""),n(2),r("ngIf",e.mainId),n(1),r("ngIf",e.mainId)}}function Dt(l,s){if(l&1&&(i(0,"div",7),_(1,"img",8),o()),l&2){let e=d().$implicit;n(1),x("src","assets/demo/images/items/",e.mainId,".png",y)}}function Lt(l,s){if(l&1&&(i(0,"div")(1,"div",18),m(2),o()()),l&2){let e=s.$implicit;n(2),h(e)}}function $t(l,s){l&1&&(i(0,"div")(1,"div",18),m(2,"no option"),o()())}function Ut(l,s){if(l&1&&(i(0,"div",20),c(1,Lt,3,1,"div",11),c(2,$t,3,0,"div",21),o()),l&2){let e=d().$implicit;n(1),r("ngForOf",e.optionTxts),n(1),r("ngIf",!(e.optionTxts!=null&&e.optionTxts.length))}}function Ft(l,s){if(l&1&&(i(0,"div"),c(1,Dt,2,1,"div",5),c(2,Ut,3,2,"div",19),o()),l&2){let e=s.$implicit;D("flex gap-2 item_label_",e.itemType,""),n(1),r("ngIf",e.mainId),n(1),r("ngIf",e.mainId)}}var qt=[p.headUpper,p.headMiddle,p.headLower,p.armor,p.weapon,p.leftWeapon,p.shield,p.garment,p.boot,p.accRight,p.accLeft],At={[p.leftWeapon]:!0,[p.shield]:!0},Bt=[p.shadowWeapon,p.shadowArmor,p.shadowShield,p.shadowBoot,p.shadowEarring,p.shadowPendant],nt=(()=>{class l{constructor(){this.itemMap={},this.model={},this.displayMainItems=[],this.displayShadowItems=[]}ngOnInit(){let e=[...this.model.rawOptionTxts??[]];this.displayMainItems=qt.map(a=>{let t=this.model[a];if(!t)return{itemType:a,cardIds:[],enchantIds:[],optionTxts:[],isHidden:At[a]||!1};let u=this.model[`${a}Refine`],g=a===p.weapon?[this.model[p.weaponCard1],this.model[p.weaponCard2],this.model[p.weaponCard3],this.model[p.weaponCard4]]:a===p.leftWeapon?[this.model[p.leftWeaponCard1],this.model[p.leftWeaponCard2],this.model[p.leftWeaponCard3],this.model[p.leftWeaponCard4]]:[this.model[`${a}Card`]],v=[this.model[`${a}Enchant1`],this.model[`${a}Enchant2`],this.model[`${a}Enchant3`]],C=(se.get(a)||[]).map(M=>re.get(e[M]));return{itemType:a,mainId:t,isHead:a===p.headUpper||a===p.headMiddle,refineTxt:u>0?`+${u}`:"",cardIds:g.filter(Boolean),enchantIds:v.filter(Boolean),optionTxts:C.filter(Boolean)}}).filter(a=>!a.isHidden),this.displayShadowItems=Bt.map(a=>{let t=this.model[a];if(!t)return{itemType:a};let u=this.model[`${a}Refine`],g=(se.get(a)||[]).map(v=>re.get(e[v]));return{itemType:a,mainId:t,refineTxt:u>0?`+${u}`:"",optionTxts:g.filter(Boolean)}})}getItemLabel(e){return this.itemMap[e]?.name||"empty"}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275cmp=E({type:l,selectors:[["app-equipment-in-detail"]],inputs:{itemMap:"itemMap",model:"model"},decls:5,vars:2,consts:[[1,"grid","grid-nogutter"],[1,"col-8"],[3,"class",4,"ngFor","ngForOf"],[1,"col-4"],[1,"col-12","flex","gap-2"],["class","item_template mt-1",4,"ngIf"],["class","grid grid-nogutter mt-1",4,"ngIf"],[1,"item_template","mt-1"],["alt","",1,"item_img",3,"src"],[1,"grid","grid-nogutter","mt-1"],["class","col-12",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"item_template","flex","gap-1"],["alt","","class","item_img",3,"src",4,"ngIf"],["src","assets/demo/images/items/card.png","alt","","class","item_img",4,"ngIf"],[1,"text_ellips","pr-2",2,"text-overflow","ellipsis"],["src","assets/demo/images/items/card.png","alt","",1,"item_img"],[1,"option-txt-label"],["class","flex gap-2 mt-1",4,"ngIf"],[1,"flex","gap-2","mt-1"],[4,"ngIf"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"div",1),c(2,Tt,4,5,"div",2),o(),i(3,"div",3),c(4,Ft,3,5,"div",2),o()()),a&2&&(n(2),r("ngForOf",t.displayMainItems),n(2),r("ngForOf",t.displayShadowItems))},dependencies:[P,L],styles:[".item_template[_ngcontent-%COMP%]{position:relative}.item_img[_ngcontent-%COMP%]{height:27px;background-image:url(./media/item_bg.UKIETPF2.PNG);background-repeat:no-repeat;background-size:cover}.text_ellips[_ngcontent-%COMP%]{height:19px;overflow:hidden;white-space:nowrap}.text_ellips_no_height[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap}.text_group_ellips[_ngcontent-%COMP%]{width:60%;overflow:hidden;white-space:nowrap}[_nghost-%COMP%]     .item_label_weapon, [_nghost-%COMP%]     .item_label_weaponCard1, [_nghost-%COMP%]     .item_label_weaponCard2, [_nghost-%COMP%]     .item_label_weaponCard3, [_nghost-%COMP%]     .item_label_weaponCard4, [_nghost-%COMP%]     .item_label_ammo, [_nghost-%COMP%]     .item_label_weaponEnchant0, [_nghost-%COMP%]     .item_label_weaponEnchant1, [_nghost-%COMP%]     .item_label_weaponEnchant2, [_nghost-%COMP%]     .item_label_weaponEnchant3{color:var(--pink-200)}[_nghost-%COMP%]     .item_label_weapon_main .item_label_element_converter .p-inputtext{color:var(--yellow-300)}[_nghost-%COMP%]     .item_label_leftWeapon_main .p-dropdown-label, [_nghost-%COMP%]     .item_label_leftWeapon_main .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_leftWeapon, [_nghost-%COMP%]     .item_label_leftWeaponCard1, [_nghost-%COMP%]     .item_label_leftWeaponCard2, [_nghost-%COMP%]     .item_label_leftWeaponCard3, [_nghost-%COMP%]     .item_label_leftWeaponCard4, [_nghost-%COMP%]     .item_label_leftWeaponEnchant0, [_nghost-%COMP%]     .item_label_leftWeaponEnchant1, [_nghost-%COMP%]     .item_label_leftWeaponEnchant2, [_nghost-%COMP%]     .item_label_leftWeaponEnchant3{color:var(--pink-200)}[_nghost-%COMP%]     .item_label_shield_main .p-dropdown-label, [_nghost-%COMP%]     .item_label_shield_main .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_shield, [_nghost-%COMP%]     .item_label_shieldCard, [_nghost-%COMP%]     .item_label_shieldEnchant1, [_nghost-%COMP%]     .item_label_shieldEnchant2, [_nghost-%COMP%]     .item_label_shieldEnchant3{color:var(--pink-200)}[_nghost-%COMP%]     .item_label_head .p-dropdown-label, [_nghost-%COMP%]     .item_label_head .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_headUpper, [_nghost-%COMP%]     .item_label_headUpperCard, [_nghost-%COMP%]     .item_label_headUpperEnchant1, [_nghost-%COMP%]     .item_label_headUpperEnchant2, [_nghost-%COMP%]     .item_label_headUpperEnchant3, [_nghost-%COMP%]     .item_label_headMiddle, [_nghost-%COMP%]     .item_label_headMiddleCard, [_nghost-%COMP%]     .item_label_headMiddleEnchant1, [_nghost-%COMP%]     .item_label_headMiddleEnchant2, [_nghost-%COMP%]     .item_label_headMiddleEnchant3, [_nghost-%COMP%]     .item_label_headLower, [_nghost-%COMP%]     .item_label_headLowerEnchant1, [_nghost-%COMP%]     .item_label_headLowerEnchant2, [_nghost-%COMP%]     .item_label_headLowerEnchant3{color:var(--blue-200)}[_nghost-%COMP%]     .item_label_def .p-dropdown-label, [_nghost-%COMP%]     .item_label_def .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_armor, [_nghost-%COMP%]     .item_label_armorCard, [_nghost-%COMP%]     .item_label_armorEnchant1, [_nghost-%COMP%]     .item_label_armorEnchant2, [_nghost-%COMP%]     .item_label_armorEnchant3, [_nghost-%COMP%]     .item_label_garment, [_nghost-%COMP%]     .item_label_garmentCard, [_nghost-%COMP%]     .item_label_garmentEnchant1, [_nghost-%COMP%]     .item_label_garmentEnchant2, [_nghost-%COMP%]     .item_label_garmentEnchant3, [_nghost-%COMP%]     .item_label_boot, [_nghost-%COMP%]     .item_label_bootCard, [_nghost-%COMP%]     .item_label_bootEnchant1, [_nghost-%COMP%]     .item_label_bootEnchant2, [_nghost-%COMP%]     .item_label_bootEnchant3{color:var(--red-200)}[_nghost-%COMP%]     .item_label_acc .p-dropdown-label, [_nghost-%COMP%]     .item_label_acc .p-cascadeselect-label, .item_float_label[_ngcontent-%COMP%], [_nghost-%COMP%]     .item_label_accLeft, [_nghost-%COMP%]     .item_label_accLeftCard, [_nghost-%COMP%]     .item_label_accLeftEnchant1, [_nghost-%COMP%]     .item_label_accLeftEnchant2, [_nghost-%COMP%]     .item_label_accLeftEnchant3, [_nghost-%COMP%]     .item_label_accRight, [_nghost-%COMP%]     .item_label_accRightCard, [_nghost-%COMP%]     .item_label_accRightEnchant1, [_nghost-%COMP%]     .item_label_accRightEnchant2, [_nghost-%COMP%]     .item_label_accRightEnchant3{color:var(--purple-200)}[_nghost-%COMP%]     .item_label_pet .p-dropdown-label, [_nghost-%COMP%]     .item_label_pet .p-cascadeselect-label{color:var(--orange-200)}[_nghost-%COMP%]     .item_label_costume .p-dropdown-label, [_nghost-%COMP%]     .item_label_costume .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_costumeUpper, [_nghost-%COMP%]     .item_label_costumeEnchantUpper, [_nghost-%COMP%]     .item_label_costumeEnchantMiddle, [_nghost-%COMP%]     .item_label_costumeEnchantLower, [_nghost-%COMP%]     .item_label_costumeEnchantGarment, [_nghost-%COMP%]     .item_label_costumeEnchantGarment4{color:var(--yellow-400)}[_nghost-%COMP%]     .item_label_shadow .p-dropdown-label, [_nghost-%COMP%]     .item_label_shadow .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_shadowWeapon, [_nghost-%COMP%]     .item_label_shadowArmor, [_nghost-%COMP%]     .item_label_shadowShield, [_nghost-%COMP%]     .item_label_shadowBoot, [_nghost-%COMP%]     .item_label_shadowEarring, [_nghost-%COMP%]     .item_label_shadowPendant{color:var(--green-200)}[_nghost-%COMP%]     .item_label_compare .p-dropdown-label, [_nghost-%COMP%]     .item_label_compare .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_compare .p-multiselect-label, [_nghost-%COMP%]     .item_label_compare .p-listbox-item{background-color:#2a2a2a;color:var(--yellow-300)}.option-txt-label[_ngcontent-%COMP%]{background-color:var(--surface-section)}"]})}}return l})();function jt(l,s){if(l&1&&(i(0,"div",5)(1,"div",6),_(2,"img",7),i(3,"div",8),m(4),o()()()),l&2){let e=s.$implicit;n(2),x("src","assets/demo/images/items/",e.value,".png",y),n(2),h(e.label)}}function Nt(l,s){if(l&1&&(i(0,"div",5)(1,"span"),m(2),o(),m(3,":"),i(4,"span",9),m(5),o()()),l&2){let e=s.$implicit;n(2),h(e.label),n(3),h(e.value)}}function Vt(l,s){if(l&1&&(i(0,"div",5)(1,"span"),m(2),o(),m(3,":"),i(4,"span",9),m(5),o()()),l&2){let e=s.$implicit;n(2),h(e.label),n(3),h(e.value)}}function Ht(l,s){if(l&1&&(i(0,"div",5)(1,"span"),m(2),o(),m(3,":"),i(4,"span",9),m(5),o()()),l&2){let e=s.$implicit;n(2),h(e.label),n(3),h(e.value)}}var lt=(()=>{class l{constructor(){this.itemMap={},this.model={},this.consumables=[],this.buffSkills=[],this.learnedSkills=[],this.activeSkills=[]}ngOnInit(){this.formatSKillToDisplay()}formatSKillToDisplay(){if(!this.job||!this.model)return;let e=[...this.model.consumables||[],...this.model.consumables2||[],...this.model.aspdPotions||[],this.model.aspdPotion].filter(Boolean),a=[];for(let t of e){let u=this.itemMap[t];u&&a.push({label:u.name,value:t})}this.consumables=a,this.buffSkills=this.toStrArray(this.model.skillBuffMap,Q),this.learnedSkills=this.toStrArray(this.model.passiveSkillMap,this.job.passiveSkills),this.activeSkills=this.toStrArray(this.model.activeSkillMap,this.job.activeSkills)}toStrArray(e,a){let t=e||{},u=[];for(let g of a||[]){let v=t[g.name];if(!v||v===0)continue;let C=g.dropdown.find(M=>M.value===v);C&&u.push({value:C.label,label:g.label})}return u}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275cmp=E({type:l,selectors:[["app-skill-detail"]],inputs:{itemMap:"itemMap",model:"model",job:"job"},decls:17,vars:4,consts:[[1,"grid","grid-nogutter","p-fluid"],[1,"col-3"],[1,"text-xl","font-semibold"],["class","pt-1",4,"ngFor","ngForOf"],[1,"text-xl","font-semibold","white-space-nowrap"],[1,"pt-1"],[1,"flex","gap-1"],["alt","",1,"consumable-icon",3,"src"],[1,"text_ellips"],[1,"buff-value-hilight","ml-1","font-semibold"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),m(3,"Consumables"),o(),c(4,jt,5,2,"div",3),o(),i(5,"div",1)(6,"div",2),m(7,"Buffs"),o(),c(8,Nt,6,2,"div",3),o(),i(9,"div",1)(10,"div",2),m(11,"Learned skills"),o(),c(12,Vt,6,2,"div",3),o(),i(13,"div",1)(14,"div",4),m(15,"Activating Skills/Effects"),o(),c(16,Ht,6,2,"div",3),o()()),a&2&&(n(4),r("ngForOf",t.consumables),n(4),r("ngForOf",t.buffSkills),n(4),r("ngForOf",t.learnedSkills),n(4),r("ngForOf",t.activeSkills))},dependencies:[P],styles:[".consumable-icon[_ngcontent-%COMP%]{width:21px;height:fit-content}.buff-value-hilight[_ngcontent-%COMP%]{color:var(--primary-color)}"]})}}return l})();function Gt(l,s){if(l&1&&(i(0,"div",39),_(1,"img",40),i(2,"div",41),m(3),o()()),l&2){let e=s.$implicit;n(1),x("src","assets/demo/images/jobs/icon_jobs_",e.icon,".png",y),n(2),h(e.label)}}function Wt(l,s){if(l&1){let e=B();i(0,"button",68),S("click",function(){w(e);let t=d().$implicit,u=d();return O(u.likePreset(t.tagId,!t.liked))}),o()}}function Kt(l,s){if(l&1){let e=B();i(0,"button",69),S("click",function(){w(e);let t=d().$implicit,u=d();return O(u.likePreset(t.tagId,!t.liked))}),o()}}function Jt(l,s){if(l&1&&(i(0,"div",14)(1,"div",15)(2,"div",70),_(3,"app-equipment-in-detail",56),o(),i(4,"div",71),_(5,"app-skill-detail",72),o()()()),l&2){let e=d().$implicit,a=d();n(3),r("itemMap",a.itemMap)("model",e.model),n(2),r("itemMap",a.itemMap)("model",e.model)("job",a.selectedCharacter)}}function Xt(l,s){if(l&1){let e=B();i(0,"tr")(1,"td")(2,"div",15)(3,"div",42)(4,"div",43)(5,"div",44),c(6,Wt,1,0,"button",45),c(7,Kt,1,0,"button",46),i(8,"span",47),m(9),o()(),i(10,"div")(11,"div",48),m(12),o(),i(13,"div",49),m(14),o()(),i(15,"div")(16,"button",50),S("click",function(){let u=w(e).$implicit,g=d();return O(g.copyPreset(u))}),o()()(),i(17,"div",43)(18,"div",51)(19,"p-inputSwitch",52),S("ngModelChange",function(t){let g=w(e).$implicit,v=d();return O(v.viewDetail[g.tagId]=t)}),o(),i(20,"label",53),m(21,"View detail"),o()(),i(22,"div")(23,"button",54),S("click",function(){let u=w(e).$implicit,g=d();return O(g.addToCalc(u))}),o()()()(),i(24,"div",55),_(25,"app-equipment-ui",56),o(),i(26,"div",57)(27,"div",15)(28,"div",24),m(29," Level: "),i(30,"span",58),m(31),o()(),i(32,"div",24),m(33," Job: "),i(34,"span",58),m(35),o()(),i(36,"div",24),m(37," Str: "),i(38,"span",59),m(39),o(),m(40,"+ "),i(41,"span"),m(42),o()(),i(43,"div",24),m(44," Int: "),i(45,"span",60),m(46),o(),m(47,"+ "),i(48,"span"),m(49),o()(),i(50,"div",24),m(51," Dex: "),i(52,"span",61),m(53),o(),m(54,"+ "),i(55,"span"),m(56),o()(),i(57,"div",24),m(58," Agi: "),i(59,"span",62),m(60),o(),m(61,"+ "),i(62,"span"),m(63),o()(),i(64,"div",24),m(65," Vit: "),i(66,"span",62),m(67),o(),m(68,"+ "),i(69,"span"),m(70),o()(),i(71,"div",24),m(72," Luk: "),i(73,"span",62),m(74),o(),m(75,"+ "),i(76,"span"),m(77),o()()(),i(78,"div",63)(79,"div",24),m(80," Melee: "),i(81,"span",64),m(82),o()(),i(83,"div",24),m(84," Range: "),i(85,"span",64),m(86),o()(),i(87,"div",14),m(88," ASPD: "),i(89,"span",64),m(90),o(),i(91,"span",65),m(92),o()(),i(93,"div",14),m(94," Hit: "),i(95,"span",64),m(96),o(),m(97," Perfect: "),i(98,"span",64),m(99),o()(),i(100,"div",14),m(101," CriRate: "),i(102,"span",64),m(103),o(),m(104," Dmg: "),i(105,"span",64),m(106),o()(),i(107,"div",24),m(108," ACD: "),i(109,"span",66),m(110),o()(),i(111,"div",24),m(112," FCT: "),i(113,"span",66),m(114),o()(),i(115,"div",24),m(116," VCT: "),i(117,"span",66),m(118),o()()()(),c(119,Jt,6,5,"div",67),o()()()}if(l&2){let e=s.$implicit,a=d();n(6),r("ngIf",!e.liked),n(1),r("ngIf",e.liked),n(2),h((e.tags==null?null:e.tags.no_tag)||0),n(3),h(e.publishName),n(2),f("by. ",e.publisherName,""),n(5),ae("inputId",e.tagId),r("ngModel",a.viewDetail[e.tagId]),n(1),ae("for",e.tagId),n(3),r("disabled",a.isCalculating||a.isCalculated[e.tagId])("loading",a.isCalculating),n(2),r("itemMap",a.itemMap)("model",e.model),n(6),f(" ",e.model==null?null:e.model.level," "),n(4),f(" ",e.model==null?null:e.model.jobLevel," "),n(4),f(" ",e.model==null?null:e.model.str," "),n(3),h(e.str||0),n(4),f(" ",e.model==null?null:e.model.int," "),n(3),h(e.int||0),n(4),f(" ",e.model==null?null:e.model.dex," "),n(3),h(e.dex||0),n(4),f(" ",e.model==null?null:e.model.agi," "),n(3),h(e.agi||0),n(4),f(" ",e.model==null?null:e.model.vit," "),n(3),h(e.vit||0),n(4),f(" ",e.model==null?null:e.model.luk," "),n(3),h(e.luk||0),n(5),h((e.summary==null?null:e.summary.melee)||0),n(4),h((e.summary==null?null:e.summary.range)||0),n(4),h((e.summary==null||e.summary.calc==null?null:e.summary.calc.totalAspd)||0),n(2),f("( ",(e.summary==null||e.summary.calc==null?null:e.summary.calc.hitPerSecs)||0," Hits/s )"),n(4),h((e.summary==null||e.summary.calc==null?null:e.summary.calc.totalHit)||0),n(3),f("",(e.summary==null||e.summary.calc==null?null:e.summary.calc.totalPerfectHit)||0," %"),n(4),f("",(e.summary==null||e.summary.calc==null?null:e.summary.calc.totalCri)||0," %"),n(3),f("",(e.summary==null?null:e.summary.criDmg)||0," %"),n(4),h((e.summary==null?null:e.summary.acd)||0),n(4),h((e.summary==null?null:e.summary.fct)||0),n(4),h((e.summary==null?null:e.summary.vct)||0),n(1),r("ngIf",a.viewDetail[e.tagId])}}function Qt(l,s){l&1&&(i(0,"tr")(1,"td"),m(2,"Not found"),o()())}function Yt(l,s){if(l&1&&(i(0,"div",73)(1,"span"),m(2),o()()),l&2){let e=s.$implicit;n(2),h(e.label)}}function Zt(l,s){l&1&&(i(0,"span",74),m(1,"MVP"),o())}function ei(l,s){l&1&&(i(0,"div",100),_(1,"i",101),o())}function ti(l,s){if(l&1){let e=B();i(0,"div")(1,"button",102),S("click",function(){w(e);let t=d().$implicit,u=d();return O(u.removeCalculated(t.id))}),_(2,"i",103),o()()}if(l&2){let e=d(2);n(1),r("disabled",e.isCalculating)}}function ii(l,s){if(l&1&&(i(0,"div",14),_(1,"app-calc-value",104),o()),l&2){let e=d().$implicit;n(1),r("enableCompare",!1)("label",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillPart2Label)("totalHit",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.totalHits)("min",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMinDamage2)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMaxDamage2)}}function ni(l,s){if(l&1&&(i(0,"div",75)(1,"div",34),c(2,ei,2,0,"div",76),i(3,"div",77)(4,"div",78),m(5),o(),c(6,ti,3,1,"div",79),o(),i(7,"div",24),m(8," Type "),i(9,"span",80),m(10),o()(),i(11,"div",24),m(12," Element: "),i(13,"span"),m(14),o(),i(15,"span",81),m(16),o()(),i(17,"div",24),_(18,"app-calc-value",82),o(),i(19,"div",24),_(20,"app-calc-value",83),o(),i(21,"div",24),_(22,"app-calc-value",84),o(),i(23,"div",24),_(24,"app-calc-value",85),o(),i(25,"div",24),_(26,"app-calc-value",86),o(),i(27,"div",87),_(28,"p-divider"),o(),i(29,"div",14)(30,"div",15)(31,"div",24),_(32,"app-calc-value",88),o(),i(33,"div",24),_(34,"app-calc-value",89),o(),i(35,"div",24),_(36,"app-calc-value",90),o(),i(37,"div",24),_(38,"app-calc-value",91),o(),i(39,"div",24),_(40,"app-calc-value",92),o(),i(41,"div",24),_(42,"app-calc-value",93),o()()(),i(43,"div",87),_(44,"p-divider"),o(),i(45,"div",94),_(46,"app-calc-value",95),o(),i(47,"div",94),_(48,"app-calc-value",96),o(),i(49,"div",14),_(50,"app-calc-value",97),o(),c(51,ii,2,5,"div",67),i(52,"div",98),_(53,"app-calc-value",99),o()()()),l&2){let e=s.$implicit,a=d();n(2),r("ngIf",a.isCalculating),n(3),h(e.name),n(1),r("ngIf",a.isCalculated[e.id]),n(4),h(e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.dmgType),n(3),D("","property_"+(e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.propertySkill)," px-1 font-semibold"),n(1),h(e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.propertySkill),n(2),f("( x ",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillPropertyMultiplier,")"),n(2),r("enableCompare",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.baseSkillDamage),n(2),r("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillSizePenalty),n(2),r("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillTotalPene),n(2),r("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillAccuracy),n(2),r("enableCompare",!1)("max",e.summary==null||e.summary.calc==null?null:e.summary.calc.hitPerSecs),n(6),r("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedVct),n(2),r("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedFct),n(2),r("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedCd),n(2),r("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedAcd),n(2),r("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.castPeriod),n(2),r("enableCompare",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.totalHitPerSec),n(3),r("hidden",!(!(e.summary==null||e.summary.dmg==null)&&e.summary.dmg.skillCanCri)),n(1),r("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillCriRateToMonster),n(1),r("hidden",!(!(e.summary==null||e.summary.dmg==null)&&e.summary.dmg.skillCanCri)),n(1),r("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillCriDmgToMonster),n(2),r("enableCompare",!1)("label",!(e.summary==null||e.summary.dmg==null)&&e.summary.dmg.skillCanCri?"SkillDmgCri:":"SkillDmg:")("showPercentDiff",!0)("totalHit",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.totalHits)("min",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMinDamage)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMaxDamage),n(1),r("ngIf",(e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillPart2Label)&&(e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMaxDamage2)),n(1),r("hidden",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.isAutoSpell),n(1),r("enableCompare",!1)("showPercentDiff",!0)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillDps)}}var li=function(){return{width:"25vw"}},ai=function(){return{"min-width":"65rem"}},oi=function(){return[0]},mi=function(){return["levelList"]},at=Pe(),ot=(()=>{class l{constructor(e,a,t,u){this.presetService=e,this.roService=a,this.messageService=t,this.confirmationService=u,this.availableTags=pe.map(g=>z({},g)),this.tagLabelMap=pe.reduce((g,v)=>(g[v.value]=v,g),{}),this.isLoading=!1,this.items=[],this.totalRecord=0,this.firstRecord=0,this.pageOptions=[5,10,20],this.pageLimit=this.pageOptions[0],this.allClasses=at,this.selectedTag="no_tag",this.selectedClassId=this.allClasses[0].value,this.searchSource=new ne,this.searchEvent$=this.searchSource.asObservable(),this.likeSource=new ne,this.likeEvent$=this.likeSource.asObservable(),this.subscriptions=[],this.viewDetail={},this.monsterCalculator=new de,this.groupMonsterList=[],this.selectedMonster=21067,this.selectedAtkSkill="",this.isCalculating=!1,this.offensiveSkills=[],this.atkSkillCascades=[],this.skillBuffs=Q,this.atkSkills=[],this.activeSkills=[],this.totalSummary={},this.summaries=[],this.isCalculated={}}ngOnInit(){this.subscribeSearch(),this.subscribeLike(),this.initData().subscribe(()=>{})}ngOnDestroy(){for(let e of this.subscriptions)e?.unsubscribe()}initData(){return _e([this.roService.getItems(),this.roService.getMonsters(),this.roService.getHpSpTable()]).pipe(T(([e,a,t])=>{this.itemMap=e,this.monsterDataMap=a,this.hpSpTable=t,this.onSelectClassChange(),this.setMonsterDropdownList(),this.onMonsterChange()}))}setMonsterDropdownList(){let e=new Map,a=[],t=Object.values(this.monsterDataMap).sort((g,v)=>g.stats.level>v.stats.level?1:-1),u={0:"Normal",1:"Boss"};for(let g of t){let{id:v,name:C,spawn:M,stats:Y}=g,{level:N,health:Z,mvp:$,class:V,elementShortName:ee,raceName:U,scaleName:F}=Y,b=$===1?" Boss":Ee(M)||(V===1?" Boss":"Etc"),H=e.get(b),q={label:`${N} ${C} (${U} ${F.at(0)})`,name:C,value:v,level:N,elementName:ee,raceName:U,className:u[V],mvp:$,scaleName:F.at(0),health:Z,groups:b.trim().split(","),searchVal:b};a.push(q),H?H.items.push(q):e.set(b,{label:b,items:[q]})}this.groupMonsterList=[...e.values()].sort((g,v)=>g.label>v.label?1:-1)}subscribeSearch(){let e=this.searchEvent$.pipe(T(()=>this.isLoading=!0),T(a=>{this.viewDetail={},a&&(this.isCalculated={})}),k(()=>{let a=le({items:[],totalItem:0});return this.selectedClassId?this.presetService.getPublishPresets({classId:this.selectedClassId,skip:this.firstRecord,take:this.pageLimit,tagName:this.selectedTag}).pipe(G(t=>(t instanceof Se&&this.messageService.add({severity:"error",summary:"Please login"}),a))):a})).subscribe(a=>{this.items=a.items.map(t=>{let g={2:100232,3:100233}[t.model?.skillBuffMap["Special Pharmacy"]];g&&Array.isArray(t.model.consumables)&&(t.model.consumables.includes(g)||t.model.consumables.push(g));let C=this.prepare(t.model).getTotalSummary();return ie(z({},t),{str:(t.model.jobStr||0)+(C.str||0),agi:(t.model.jobAgi||0)+(C.agi||0),vit:(t.model.jobVit||0)+(C.vit||0),int:(t.model.jobInt||0)+(C.int||0),dex:(t.model.jobDex||0)+(C.dex||0),luk:(t.model.jobLuk||0)+(C.luk||0),summary:C})}),this.totalRecord=a.totalItem,this.isLoading=!1});this.subscriptions.push(e)}search(e){this.searchSource.next(e)}onSelectClassChange(){this.firstRecord=0,this.searchSource.next(!0),this.selectedClassId&&(this.selectedCharacter=at.find(e=>e.value===this.selectedClassId)?.instant,this.setClassSkill(),I().subscribe(()=>{this.setDefaultSkill()})),this.summaries=[]}subscribeLike(){let e=this.likeEvent$.pipe(T(()=>this.isLoading=!0),ge(300),k(({tagId:a,isLike:t})=>t?this.presetService.likePresetTags(a):this.presetService.unlikePresetTag(a)),G(a=>(this.isLoading=!1,ue(()=>a)))).subscribe(a=>{let t=this.items.find(u=>u.tagId===a.id);t&&(t.liked=a.liked,t.tags[this.selectedTag]=a.totalLike),this.isLoading=!1});this.subscriptions.push(e)}likePreset(e,a){this.likeSource.next({tagId:e,isLike:a})}waitConfirm(e,a){return new Promise(t=>{this.confirmationService.confirm({message:e,header:"Confirmation",icon:a||"pi pi-exclamation-triangle",accept:()=>{t(!0)},reject:()=>{console.log("reject confirm"),t(!1)}})})}copyPreset(e){console.log(e.publishName),this.waitConfirm(`Copy "${e.publishName}" ?`).then(a=>{a&&(this.isLoading=!1,this.presetService.createPreset({label:`copied ${e.publishName}`,model:e.model}).pipe(T(()=>{this.messageService.add({severity:"success",summary:"Copy preset success"})}),G(t=>(this.messageService.add({severity:"error",summary:t?.error||t?.message}),le(!0)))).subscribe(()=>{this.isLoading=!1}))})}pageChange(e){this.firstRecord=e.first,this.pageLimit=e.rows,this.search(!1)}addToCalc(e){this.isCalculating=!0,I().pipe(k(()=>(this.isCalculated[e.tagId]=!0,I())),k(()=>{let t=this.prepare(e.model).getTotalSummary(),u=this.summaries.find(g=>g.id===e.tagId);return u?u.summary=t:this.summaries.push({id:e.tagId,name:e.publishName,model:e.model,summary:t}),I()})).subscribe(()=>{this.isCalculating=!1})}removeCalculated(e){this.isCalculated[e]=!1,this.isCalculating=!0,I().pipe(k(()=>(this.summaries=this.summaries.filter(a=>a.id!==e),I()))).subscribe(()=>{this.isCalculating=!1})}setClassSkill(){this.activeSkills=this.selectedCharacter.activeSkills,this.atkSkills=this.selectedCharacter.atkSkills,this.atkSkillCascades=this.selectedCharacter.atkSkills,this.offensiveSkills=[...new Set(this.atkSkills.map(e=>e.name)).values()].map(e=>({label:e,value:e}))}setDefaultSkill(){let e=this.atkSkills[0].value;this.selectedAtkSkill=e}getOptionScripts(e){return(e||[]).map(a=>{if(typeof a!="string"||a==="")return"";let[,t,u]=a.match(/(.+):(\d+)/)??[];return t?{[t]:Number(u)}:""}).filter(Boolean)}prepare(e){let{activeSkills:a,passiveSkills:t}=e,{equipAtks:u,masteryAtks:g,activeSkillNames:v,learnedSkillMap:C}=this.selectedCharacter.setLearnSkills({activeSkillIds:a,passiveSkillIds:t}).getSkillBonusAndName(),{consumables:M,consumables2:Y,aspdPotion:N,aspdPotions:Z}=e,$=M.includes(12792),V=M.includes(12424),ee=[...M,...Y,...Z].filter(Boolean).filter(b=>!$||$&&b!==12791).map(b=>this.itemMap[b].script),U={},F={};return this.skillBuffs.forEach((b,H)=>{let q=(e.skillBuffs||[])[H],te=b.dropdown.find(rt=>rt.value===q);te?.isUse&&!v.has(b.name)&&(b.isMasteryAtk?F[b.name]=te.bonus:U[b.name]=te.bonus)}),e.rawOptionTxts=Ie(e,this.itemMap),new de().setMasterItems(this.itemMap).setClass(this.selectedCharacter).setHpSpTable(this.hpSpTable).loadItemFromModel(e).setMonster(this.monsterDataMap[this.selectedMonster]).setEquipAtkSkillAtk(u).setBuffBonus({masteryAtk:F,equipAtk:U}).setMasterySkillAtk(g).setConsumables(ee).setAspdPotion(N).setExtraOptions(this.getOptionScripts(e.rawOptionTxts)).setUsedSkillNames(v).setLearnedSkills(C).setOffensiveSkill(this.selectedAtkSkill).prepareAllItemBonus().calcAllAtk().calcAllDefs().calculateHpSp({isUseHpL:V}).calculateAllDamages(this.selectedAtkSkill)}onAtkSkillChange(){this.recalcSummary()}onMonsterChange(){this.totalSummary=this.monsterCalculator.setMonster(this.monsterDataMap[this.selectedMonster]).getMonsterSummary(),this.recalcSummary()}recalcSummary(){this.isCalculating=!0,I().pipe(k(()=>(this.summaries=this.summaries.map(e=>{let a=this.prepare(e.model);return ie(z({},e),{summary:a.getTotalSummary()})}),I()))).subscribe(()=>this.isCalculating=!1)}static{this.\u0275fac=function(a){return new(a||l)(A(Me),A(ke),A(X),A(J))}}static{this.\u0275cmp=E({type:l,selectors:[["app-shared-preset"]],features:[fe([X,J])],decls:94,vars:55,consts:[[3,"position"],[1,"grid","grid-nogutter",2,"min-width","1500px"],[1,"col-12","mb-2"],[1,"grid","grid-nogutter","column_list"],[3,"options","ngModel","disabled","ngModelChange","onChange"],["pTemplate","item","class","py-0"],[1,"col-9"],["styleClass","p-datatable-striped","filterValue","label",3,"value","loading","tableStyle","showCurrentPageReport","paginator","first","rows","totalRecords","lazy","rowsPerPageOptions","onPage"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"p-fluid","col-3"],[3,"multiple","activeIndex"],["header","Battle Summary"],[1,"grid","grid-nogutter","battle_summary"],[1,"col-12"],[1,"grid","grid-nogutter"],[1,"p-inputgroup"],[1,"p-inputgroup-addon","monster_hilight_label"],["inputId","monsterOpponent","filterBy","label,searchVal","scrollHeight","300px",3,"autoDisplayFirst","resetFilterOnHide","options","filter","group","ngModel","ngModelChange","onChange"],["pTemplate","group"],[1,"col-6","flex","align-items-center","justify-content-center"],[1,"grid","grid-nogutter",2,"height","100%","width","100%"],[1,"col-12","flex","align-items-center","justify-content-center"],["alt","-",1,"img_monster",3,"src"],[1,"col-6"],[1,"summary_monster_value","px-1","font-semibold"],[1,"summary_monster_value","px-1","font-bold",2,"color","var(--red-500)"],["class","font-bold px-1",4,"ngIf"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--yellow-300)"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--cyan-300)"],[1,"col-12","flex","justify-content-around"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--red-300)"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--blue-300)"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--green-300)"],[1,"grid","grid-nogutter",2,"position","relative"],[1,"col-12","skill-selection"],[1,"p-inputgroup-addon","skill_hilight_label"],["inputId","skill","optionValue","value","optionLabel","label","optionGroupLabel","label","placeholder","-",3,"ngModel","options","optionGroupChildren","ngModelChange","onChange"],["class","col-12 my-2",4,"ngFor","ngForOf"],[1,"flex","gap-2","py-0"],["alt","",1,"job_img",3,"src"],[1,"text_ellips"],[1,"col-12","flex","justify-content-between"],[1,"flex","align-items-center"],[1,"like_section","pr-3"],["pButton","","icon","pi pi-thumbs-up text-3xl","class","p-button-text p-button-rounded",3,"click",4,"ngIf"],["pButton","","icon","pi pi-thumbs-up-fill text-3xl","class","p-button-text p-button-rounded",3,"click",4,"ngIf"],[1,"px-2","font-bold","text-primary","text-xl"],[1,"font-bold","text-2xl"],[1,"font-medium"],["pButton","","icon","pi pi-copy text-3xl","label","Copy",1,"p-button-text","p-button-rounded","p-button-warning",3,"click"],[1,"flex","ml-3"],[3,"inputId","ngModel","ngModelChange"],[1,"mx-2",3,"for"],["pButton","","type","button","label","Calculate",1,"p-button-info",3,"disabled","loading","click"],[1,"col-10",2,"min-width","450px","overflow","hidden"],[3,"itemMap","model"],[1,"col-2"],[1,"summary_highlight","text-xl","font-semibold"],[1,"summary_stat_atk","text-xl"],[1,"summary_stat_matk","text-xl"],[1,"summary_stat_atk","text-xl",2,"color","var(--green-300)"],[1,"summary_stat_def","text-xl"],[1,"grid","grid-nogutter","mt-2"],[1,"font-semibold","px-1","summary_stat_atk"],[1,"font-semibold","px-1","summary_highlight"],[1,"font-semibold","px-1","summary_stat_matk"],["class","col-12",4,"ngIf"],["pButton","","icon","pi pi-thumbs-up text-3xl",1,"p-button-text","p-button-rounded",3,"click"],["pButton","","icon","pi pi-thumbs-up-fill text-3xl",1,"p-button-text","p-button-rounded",3,"click"],[1,"col-5"],[1,"col-7"],[3,"itemMap","model","job"],[1,"flex","align-items-center","font-bold","dropdown_monster_group_label"],[1,"font-bold","px-1"],[1,"col-12","my-2"],["class","loading_block",4,"ngIf"],[1,"col-12","flex","align-items-center","justify-content-between"],[1,"font-bold","text-xl"],[4,"ngIf"],[1,"summary_highlight","bg_surface","font-semibold"],[1,"summary_highlight","bg_surface","px-2"],["label","BaseSkill:","unit","%","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","SizePenalty:","unit"," %","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","\u0E40\u0E08\u0E32\u0E30:","unit","%","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","\u0E41\u0E21\u0E48\u0E19:","unit","%","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","ASPD:","unit"," Hits/s","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],[1,"col-12","py-1","divider"],["label","VCT:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","FCT:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","CD:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","Delay:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","Cast:","styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","Skill/s:","unit"," Hits/s","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],[1,"col-6",3,"hidden"],["label","CriRate:","unit","%","styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","max"],["label","CriDmg:","unit","%","styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","max"],["styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","label","showPercentDiff","totalHit","min","max"],[1,"col-12",3,"hidden"],["label","DPS:","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","showPercentDiff","max"],[1,"loading_block"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2rem"],["pButton","","type","button",1,"p-button-text","p-button-rounded","p-button-danger",3,"disabled","click"],[1,"pi","pi-times","text-xl"],["styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","label","totalHit","min","max"]],template:function(a,t){a&1&&(_(0,"p-toast")(1,"p-confirmDialog",0),i(2,"div",1)(3,"div",2)(4,"div",3)(5,"p-listbox",4),S("ngModelChange",function(g){return t.selectedClassId=g})("onChange",function(){return t.onSelectClassChange()}),c(6,Gt,4,2,"ng-template",5),o()()(),i(7,"div",6)(8,"p-table",7),S("onPage",function(g){return t.pageChange(g)}),c(9,Xt,120,38,"ng-template",8),c(10,Qt,3,0,"ng-template",9),o()(),i(11,"div",10)(12,"p-accordion",11)(13,"p-accordionTab",12)(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",14)(18,"div",16)(19,"span",17),m(20,"Monster"),o(),i(21,"p-dropdown",18),S("ngModelChange",function(g){return t.selectedMonster=g})("onChange",function(){return t.onMonsterChange()}),c(22,Yt,3,1,"ng-template",19),o()()(),i(23,"div",20)(24,"div",21)(25,"div",22),_(26,"img",23),o()()(),i(27,"div",24)(28,"div",15)(29,"div",14),m(30," HP "),i(31,"span",25),m(32),ve(33,"number"),o()(),i(34,"div",14),m(35," Def "),i(36,"span",25),m(37),o()(),i(38,"div",14),m(39," Mdef "),i(40,"span",25),m(41),o()(),i(42,"div",14),m(43," Req.Hit100 "),i(44,"span",25),m(45),o()(),i(46,"div",14)(47,"span",26),m(48),o(),c(49,Zt,2,0,"span",27),o(),i(50,"div",14)(51,"span"),m(52),o()(),i(53,"div",14)(54,"span",28),m(55),o()(),i(56,"div",14)(57,"span",29),m(58),o()(),i(59,"div",30)(60,"div"),m(61," STR "),i(62,"span",31),m(63),o()(),i(64,"div"),m(65," INT "),i(66,"span",32),m(67),o()()(),i(68,"div",30)(69,"div"),m(70," DEX "),i(71,"span",33),m(72),o()(),i(73,"div"),m(74," AGI "),i(75,"span",33),m(76),o()()(),i(77,"div",30)(78,"div"),m(79," VIT "),i(80,"span",28),m(81),o()(),i(82,"div"),m(83," LUK "),i(84,"span",28),m(85),o()()()()()()(),i(86,"div",14)(87,"div",34)(88,"div",35)(89,"div",16)(90,"span",36),m(91,"Skill"),o(),i(92,"p-cascadeSelect",37),S("ngModelChange",function(g){return t.selectedAtkSkill=g})("onChange",function(){return t.onAtkSkillChange()}),o()()()()(),c(93,ni,54,53,"div",38),o()()()()()),a&2&&(n(1),he(R(51,li)),r("position","top"),n(4),r("options",t.allClasses)("ngModel",t.selectedClassId)("disabled",t.isLoading),n(3),r("value",t.items)("loading",t.isLoading)("tableStyle",R(52,ai))("showCurrentPageReport",!0)("paginator",!0)("first",t.firstRecord)("rows",t.pageLimit)("totalRecords",t.totalRecord)("lazy",!0)("rowsPerPageOptions",t.pageOptions),n(4),r("multiple",!0)("activeIndex",R(53,oi)),n(9),r("autoDisplayFirst",!1)("resetFilterOnHide",!0)("options",t.groupMonsterList)("filter",!0)("group",!0)("ngModel",t.selectedMonster),n(5),x("src","https://static.divine-pride.net/images/mobs/png/",t.selectedMonster,".png",y),n(6),h(Ce(33,49,t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.hp)),n(5),oe("",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.softDef," + ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.def,""),n(4),oe("",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.softMDef," + ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.mdef,""),n(4),h(t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.hitRequireFor100),n(3),h(t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.typeUpper),n(1),r("ngIf",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.isMvp),n(2),D("","property_"+(t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.elementUpper)," summary_monster_value px-1 font-semibold"),n(1),h(t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.elementLevelUpper),n(3),h(t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.raceUpper),n(3),h(t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.sizeFullUpper),n(5),f(" ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.str," "),n(4),f(" ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.int," "),n(5),f(" ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.dex," "),n(4),f(" ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.agi," "),n(5),f(" ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.vit," "),n(4),f(" ",t.totalSummary==null||t.totalSummary.monster==null?null:t.totalSummary.monster.luk," "),n(7),r("ngModel",t.selectedAtkSkill)("options",t.atkSkillCascades)("optionGroupChildren",R(54,mi)),n(1),r("ngForOf",t.summaries))},dependencies:[Ye,be,we,P,L,Ve,Ue,Fe,Xe,je,Ae,Le,Ge,ze,Te,Ke,et,it,nt,lt,ye],styles:["[_nghost-%COMP%]     .column_list p-listbox .p-listbox-list{min-width:1480px;columns:10;padding:0}[_nghost-%COMP%]     .column_list .p-listbox-item{padding:.5rem}[_nghost-%COMP%]     .battle_summary .p-fieldset-content{padding-top:0;padding-bottom:0}.p-inputgroup[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .p-inputgroup p-dropdown .p-dropdown-filter{width:100%}[_nghost-%COMP%]     .divider .p-divider-horizontal{margin:0;padding:0}.summary_monster_value[_ngcontent-%COMP%]{background-color:#121212;color:var(--red-300)}.monster_hilight_label[_ngcontent-%COMP%]{background-color:#121212;color:var(--red-500);width:75px}.skill_hilight_label[_ngcontent-%COMP%]{background-color:#121212;color:var(--yellow-500);width:60px}.dropdown_monster_group_label[_ngcontent-%COMP%]{background-color:var(--green-900);color:#fff}.img_monster[_ngcontent-%COMP%]{background-color:#fff;height:150px}.border_default[_ngcontent-%COMP%]{border:var(--border-radius) solid var(--surface-border)}.job_img[_ngcontent-%COMP%]{height:fit-content}.like_section[_ngcontent-%COMP%]{display:flex;align-items:center}.loading_block[_ngcontent-%COMP%]{position:absolute;background-color:#0006;transition-duration:.2s;z-index:2;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.summary_stat_atk[_ngcontent-%COMP%]{color:var(--orange-300)}.summary_stat_matk[_ngcontent-%COMP%]{color:var(--blue-300)}.summary_stat_def[_ngcontent-%COMP%]{color:var(--purple-200)}.summary_highlight[_ngcontent-%COMP%]{color:var(--orange-400)}.summary_value[_ngcontent-%COMP%]{background-color:#121212;color:var(--blue-300)}.summary_damage[_ngcontent-%COMP%]{background-color:#121212;color:var(--teal-300)}.bg_surface[_ngcontent-%COMP%]{background-color:#121212}[_nghost-%COMP%]     .skill-selection .p-cascadeselect-sublist{left:-70%!important;min-width:70%}[_nghost-%COMP%]     .skill-selection .p-inputgroup .p-cascadeselect{width:100%}"]})}}return l})();var mt=(()=>{class l{static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275mod=K({type:l})}static{this.\u0275inj=W({imports:[me.forChild([{path:"",component:ot}]),me]})}}return l})();var pn=(()=>{class l{static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275mod=K({type:l})}static{this.\u0275inj=W({imports:[Ze,Oe,xe,He,Re,qe,Qe,Ne,Be,$e,We,mt,De,Je,tt]})}}return l})();export{pn as SharedPresetModule};
